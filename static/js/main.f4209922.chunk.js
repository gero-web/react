(this.webpackJsonpfronted=this.webpackJsonpfronted||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),c=n(26),s=n.n(c),i=(n(187),n(27)),o=(n(188),n(189),n(24)),l=n(36),u="REGISTER_SUCCESS",j="REGISTER_FAIL",d="LOGIN_SUCCESS",b="LOGIN_FAIL",m="LOGOUT",O="SET_MESSAGE",h="CLEAR_MESSAGE",p=n(64),g=n.n(p),f="https://peaceful-castle-65198.herokuapp.com/";var x={registration_user:function(e,t){return g.a.post(f+"register/",{user:{email:e,password:t}})},logout:function(){localStorage.removeItem("user")},login:function(e,t){return g.a.post(f+"login/",{user:{email:e,password:t}}).then((function(e){var t;t=e.data,localStorage.setItem("user",JSON.stringify(t))}))}},y=function(e,t){return function(n){return x.login(e,t).then((function(e){return n({type:d,payload:{user:JSON.parse(localStorage.getItem("user"))}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return n({type:b}),n({type:O,payload:t.error}),Promise.reject()}))}},v=function(){return x.logout(),{type:m}},k=n(292),I=n(33),S=n(289),C=n(291),T=n(100),F={labelCol:{span:8},wrapperCol:{span:16}},E={wrapperCol:{offset:8,span:16}},w=function(e){var t=e.IsVisible,n=e.msgError,c=Object(r.useState)(""),s=Object(i.a)(c,2),d=s[0],b=s[1],m=Object(r.useState)(""),h=Object(i.a)(m,2),p=h[0],g=h[1],f=Object(i.a)(t,2),v=f[0],w=f[1],L=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,_=Object(l.b)(),q=function(){w(!1),N()},N=function(){_({type:O,payload:""})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(k.a,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",centered:!0,visible:v,onCancel:q,footer:[Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{form:"registerForm",onClick:q,type:"danger",htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cansle"),Object(a.jsx)(I.a,{form:"registerForm",onClick:function(){setTimeout((function(){}),1e3)},type:"primary",htmlType:"submit",children:"Ok"},"submit")]})],children:!L&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(S.a,Object(o.a)(Object(o.a)({onFinish:function(e){_(function(e,t){return function(n){return x.registration_user(e,t).then((function(e){return n({type:u}),n({type:O,payload:e.data.message}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return n({type:j}),console.log(t),n({type:O,payload:t.email[0]}),t.error&&n({type:O,payload:t.error}),Promise.reject()}))}}(d,p)).then((function(){_(y(d,p)).then((function(){q()})).catch((function(){}))})).catch((function(){}))},id:"registerForm"},F),{},{name:"basic",initialValues:{remember:!0},children:[Object(a.jsx)("div",{style:{margin:"5",width:"60%",color:"#cc0000",border:"1px"},children:n}),Object(a.jsx)(S.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;b(t)},value:d})}),Object(a.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(a.jsx)(C.a.Password,{onChange:function(e){var t=e.target.value;g(t)},value:p})}),Object(a.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},E),{},{name:"remember",valuePropName:"checked",children:Object(a.jsx)(T.a,{children:"Remember me"})}))]}),"FormRegister")})},"ModalRegister")})},L=function(e){var t=e.IsVisible,n=e.msgError,c=Object(i.a)(t,2),s=c[0],u=c[1],j=Object(r.useState)(""),d=Object(i.a)(j,2),b=d[0],m=d[1],h=Object(r.useState)(""),p=Object(i.a)(h,2),g=p[0],f=p[1],x=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,v=Object(l.b)(),T=function(){setTimeout((function(){}),2e3)},E=function(){u(!1),w()},w=function(){v({type:O,payload:""})};return Object(a.jsx)(k.a,{title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",centered:!0,visible:s,onOk:T,onCancel:E,footer:[Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{form:"loginForm",onClick:E,type:"danger",htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cansle"),Object(a.jsx)(I.a,{form:"loginForm",onClick:T,type:"primary",htmlType:"submit",children:"Ok"},"submit")]})],children:!x&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(S.a,Object(o.a)(Object(o.a)({id:"loginForm",onFinish:function(e){v(y(b,g)).then((function(){E()})).catch((function(){}))}},F),{},{name:"basic",initialValues:{remember:!0},children:[Object(a.jsx)("div",{style:{margin:"5",width:"60%",color:"#cc0000",border:"1px"},children:n}),Object(a.jsx)(S.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;m(t)},value:b})}),Object(a.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(a.jsx)(C.a.Password,{onChange:function(e){var t=e.target.value;f(t)},value:g})})]}),"FormLogin")})},"ModalLogin")};function _(){var e=localStorage.key("user")?JSON.parse(localStorage.getItem("user")).user:void 0;return e&&e.token?{Authorization:"token "+e.token}:{}}var q=function(e,t){return g.a.put(f+"profile/",{user:{email:e,password:t}},{headers:_()})},N=function(e){var t=e.history,n=e.user,c=Object(r.useState)(""),s=Object(i.a)(c,2),u=s[0],j=s[1],d=Object(r.useState)(""),b=Object(i.a)(d,2),m=b[0],O=b[1],h=Object(l.b)();Object(r.useEffect)((function(){n&&n.user?(j(n.user.email),O(n.user.password)):t.push("/")}),[]);return Object(a.jsxs)(S.a,Object(o.a)(Object(o.a)({onFinish:function(e){q(u,m).then((function(e){h(v),h(y(u,m)),t.push("/")})).catch((function(e){}))},id:"registerForm"},F),{},{name:"basic",initialValues:{remember:!0},children:[Object(a.jsx)("div",{style:{margin:"5",width:"60%",color:"#cc0000",border:"1px"}}),Object(a.jsx)(S.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;j(t)},value:u})}),Object(a.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(a.jsx)(C.a.Password,{onChange:function(e){var t=e.target.value;O(t)},value:m})}),Object(a.jsx)(S.a.Item,{children:Object(a.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Ok!"})})]}),"FormRegister")},P=n(29),A=n(78),R=n(40),V=Object(R.a)(),D=n(176),G=n(290),B=function(e){var t=e.history,n=e.title,r=e.style;return Object(a.jsx)(G.a,{style:r||{padding:"0 50px",margin:"-30px 0 0 0"},className:"site-page-header",onBack:function(){return t.goBack()},title:n,subTitle:""})},J=g.a.create({baseURL:f,headers:{}});var M={getAllTask:function(){return J.get("task/",{headers:_()})},getTask:function(e){return J.get("detail_task/".concat(e),{headers:_()})},updateTask:function(e,t){return J.put("update_task/".concat(e),t,{headers:_()})},delateTask:function(e){return J.delete("delate_task/".concat(e),{headers:_()})},create_task:function(e){return J.post("create_task/",e,{headers:_()})}},z=n(293),U=n(285),H=n(175),W=n(287),K=function(e){var t=e.history,n=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,c=[{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"name",key:"name"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"desctiption",key:"desctiption"},{title:"Action",key:"action",render:function(e,t){return Object(a.jsxs)(z.b,{size:"middle",children:[n&&Object(a.jsx)(A.a,{to:{pathname:"/edit",query:t},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c "}),Object(a.jsx)(A.a,{to:{pathname:"/detail",query:{name:t.name,desc:t.desctiption}},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0439 "}),Object(a.jsx)(U.a,{title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u0441\u0442\u0440\u043e\u043a\u0443?",okText:"\u0414\u0430",onConfirm:function(){M.delateTask(t.pk).then((function(e){b(t.key)})).catch((function(e){H.b.error("\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0438\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432")}))},cancelText:"\u041d\u0435\u0442",children:Object(a.jsx)("a",{onClick:function(e){e.preventDefault()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})}}],s=Object(r.useState)([]),u=Object(i.a)(s,2),j=u[0],d=u[1];Object(r.useEffect)((function(){M.getAllTask().then((function(e){M.getAllTask().then((function(e){d(e.data.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{key:e.pk})})))}))}))}),[]);var b=function(e){var t=Object(D.a)(j);d(t.filter((function(t){return t.key!==e})))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Home",history:t}),Object(a.jsx)(I.a,{onClick:function(){t.push("/add")},type:"link",size:"large",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443!"}),Object(a.jsx)(W.a,{columns:c,dataSource:j})]})},Q=function(e){var t=e.id,n=e.name,c=e.desk,s=e.onhandleTask,l=Object(r.useState)(""),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(r.useState)(""),m=Object(i.a)(b,2),O=m[0],h=m[1],p=Object(r.useState)(t),g=Object(i.a)(p,2),f=g[0];g[1];Object(r.useEffect)((function(){n&&c&&(d(n),h(c))}),[]);return Object(a.jsx)("div",{style:{minHeight:"400vh",maxWidth:"952px"},children:Object(a.jsxs)(S.a,Object(o.a)(Object(o.a)({},F),{},{name:"basic",children:[Object(a.jsx)(S.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",name:"Task",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;d(t)},value:j,defaultValue:n})}),Object(a.jsx)(S.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"desck",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;h(t)},value:O,defaultValue:c})}),Object(a.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},E),{},{children:Object(a.jsx)(I.a,{type:"primary",onClick:function(e){e.preventDefault(),j&&O&&s(f,j,O)},htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c!"})}))]}))})},X=function(e){var t=e.history,n=e.location,r=n.query?n.query:t.goBack(),c=r.pk,s=r.name,i=r.desctiption;return Object(a.jsxs)("div",{children:[Object(a.jsx)(B,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Edit",history:t}),Object(a.jsx)(Q,{id:c,name:s,desk:i,history:t,onhandleTask:function(e,n,a){M.updateTask(e,{task:{name:n,desctiption:a}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},Y=function(e){var t=e.history;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Create",history:t}),Object(a.jsx)(Q,{id:"",name:"",desk:"",history:t,onhandleTask:function(e,n,a){M.create_task({task:{name:n,desctiption:a}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},Z=n(288),$=function(e){var t=e.history,n=e.location,c=Object(r.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){n.query?(l(n.query.name),b(n.query.desc)):t.goBack()}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Detail",history:t}),Object(a.jsx)(Z.a,{title:"\u0417\u0430\u0434\u0430\u0447\u0430",children:Object(a.jsx)(Z.a,{type:"inner",title:o,children:d})})]})},ee=n(286),te=n(55);var ne=function(){var e=Object(l.c)((function(e){return e.auth_reducers})),t=e.isLoggindIn,n=e.user,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],u=s[1],j=Object(r.useState)(!1),d=Object(i.a)(j,2),b=d[0],m=d[1],O=Object(l.b)(),p=ee.a.Header,g=ee.a.Content,f=Object(l.c)((function(e){return e.message_reducers})).message;return Object(r.useEffect)((function(){V.listen((function(e){return O({type:h,payload:""})}))}),[O]),Object(a.jsx)(P.b,{history:V,children:Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(ee.a,{className:"layout",children:[Object(a.jsxs)(p,{children:[Object(a.jsx)("div",{className:"logo"}),Object(a.jsxs)(te.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(a.jsx)(te.a.Item,{children:Object(a.jsx)(A.a,{to:"/home",children:"Main"})},"1"),!t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(te.a.Item,{children:Object(a.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),u(!0)},children:"\u0412\u043e\u0439\u0442\u0438"})},"2"),Object(a.jsx)(te.a.Item,{children:Object(a.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),m(!0)},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})},"3")]}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(te.a.Item,{children:Object(a.jsx)(A.a,{to:"/profile",className:"nav-link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})},"4"),Object(a.jsx)(te.a.Item,{children:Object(a.jsx)(A.a,{onClick:function(e){e.preventDefault(),O(v())},to:"/",className:"nav-link",children:"\u0412\u044b\u0445\u043e\u0434"})},"5")]})]})]}),Object(a.jsxs)(g,{style:{padding:"0 50px",margin:"50px 0 0 0"},children:[Object(a.jsx)("div",{className:"site-layout-content",children:Object(a.jsxs)(P.c,{children:[Object(a.jsx)(P.a,{exact:!0,path:"/",component:K}),Object(a.jsx)(P.a,{exact:!0,path:"/home",component:K}),Object(a.jsx)(P.a,{exact:!0,path:"/profile",component:function(e){var r=e.history;return console.log(t),Object(a.jsx)(N,{history:r,user:n})}}),Object(a.jsx)(P.a,{exact:!0,path:"/detail",component:$}),Object(a.jsx)(P.a,{exact:!0,path:"/edit",component:X}),Object(a.jsx)(P.a,{exact:!0,path:"/add",component:Y})]})}),Object(a.jsx)(L,{msgError:f,IsVisible:[o,u]},"login"),Object(a.jsx)(w,{msgError:f,IsVisible:[b,m]},"register")]})]})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,294)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},re=n(63),ce=n(170),se=n(171),ie=JSON.parse(localStorage.getItem("user")),oe=ie?{isLoggindIn:!0,user:ie}:{isLoggindIn:!1,user:null};var le={messagePass:"",messageEmail:"",message:""};var ue=Object(re.combineReducers)({auth_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case u:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1});case j:return Object(o.a)(Object(o.a)({},e),{},{isLoggingdIn:!1});case d:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!0,user:a.user});case b:case m:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1,user:null});default:return e}},message_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case O:return{message:a};case h:return{message:""};default:return e}}}),je=[se.a],de=Object(re.createStore)(ue,Object(ce.composeWithDevTools)(re.applyMiddleware.apply(void 0,je)));s.a.render(Object(a.jsx)(l.a,{store:de,children:Object(a.jsx)(ne,{})}),document.getElementById("root")),ae()}},[[283,1,2]]]);
//# sourceMappingURL=main.f4209922.chunk.js.map