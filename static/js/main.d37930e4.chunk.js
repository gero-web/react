(this.webpackJsonpfronted=this.webpackJsonpfronted||[]).push([[0],{209:function(e,t,n){},210:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),c=n(28),s=n.n(c),i=(n(209),n(27)),o=(n.p,n(210),n(211),n(25)),l=n(32),u="REGISTER_SUCCESS",j="REGISTER_FAIL",d="LOGIN_SUCCESS",b="LOGIN_FAIL",m="LOGOUT",h="SET_MESSAGE",O="CLEAR_MESSAGE",g=n(67),p=n.n(g),f="https://peaceful-castle-65198.herokuapp.com/";var x={registration_user:function(e,t){return p.a.post(f+"register/",{user:{email:e,password:t}})},logout:function(){localStorage.removeItem("user")},login:function(e,t){return p.a.post(f+"login/",{user:{email:e,password:t}}).then((function(e){var t;t=e.data,localStorage.setItem("user",JSON.stringify(t))}))}},v=function(e,t){return function(n){return x.login(e,t).then((function(e){return n({type:d,payload:{user:e}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return n({type:b}),n({type:h,payload:t.error}),Promise.reject()}))}},y=function(){return{type:m}},k=n(397),I=n(35),S=n(394),C=n(396),N=n(103),T={labelCol:{span:8},wrapperCol:{span:16}},F={wrapperCol:{offset:8,span:16}},E=function(e){var t=e.IsVisible,n=e.msgError,c=Object(r.useState)(""),s=Object(i.a)(c,2),d=s[0],b=s[1],m=Object(r.useState)(""),O=Object(i.a)(m,2),g=O[0],p=O[1],f=Object(i.a)(t,2),y=f[0],E=f[1],w=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,_=Object(l.b)(),L=function(){E(!1),q()},q=function(){_({type:h,payload:""})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(k.a,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",centered:!0,visible:y,onCancel:L,footer:[Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{form:"registerForm",onClick:L,type:"danger",htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cansle"),Object(a.jsx)(I.a,{form:"registerForm",onClick:function(){setTimeout((function(){}),1e3)},type:"primary",htmlType:"submit",children:"Ok"},"submit")]})],children:!w&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(S.a,Object(o.a)(Object(o.a)({onFinish:function(e){_(function(e,t){return function(n){return x.registration_user(e,t).then((function(e){return n({type:u}),n({type:h,payload:e.data.message}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return console.log(JSON.stringify(t)),n({type:j}),console.log(t),n({type:h,payload:t.email[0]}),t.error&&n({type:h,payload:t.error}),Promise.reject()}))}}(d,g)).then((function(){_(v(d,g)).then((function(){L()})).catch((function(){}))})).catch((function(){console.log(1)}))},id:"registerForm"},T),{},{name:"basic",initialValues:{remember:!0},children:[Object(a.jsx)("div",{style:{margin:"5",width:"60%",color:"#cc0000",border:"1px"},children:n}),Object(a.jsx)(S.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;b(t)},value:d})}),Object(a.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(a.jsx)(C.a.Password,{onChange:function(e){var t=e.target.value;p(t)},value:g})}),Object(a.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},F),{},{name:"remember",valuePropName:"checked",children:Object(a.jsx)(N.a,{children:"Remember me"})}))]}),"FormRegister")})},"ModalRegister")})},w=function(e){var t=e.IsVisible,n=e.msgError,c=Object(i.a)(t,2),s=c[0],u=c[1],j=Object(r.useState)(""),d=Object(i.a)(j,2),b=d[0],m=d[1],O=Object(r.useState)(""),g=Object(i.a)(O,2),p=g[0],f=g[1],x=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,y=Object(l.b)(),N=function(){setTimeout((function(){}),2e3)},F=function(){u(!1),E()},E=function(){y({type:h,payload:""})};return Object(a.jsx)(k.a,{title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",centered:!0,visible:s,onOk:N,onCancel:F,footer:[Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{form:"loginForm",onClick:F,type:"danger",htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cansle"),Object(a.jsx)(I.a,{form:"loginForm",onClick:N,type:"primary",htmlType:"submit",children:"Ok"},"submit")]})],children:!x&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(S.a,Object(o.a)(Object(o.a)({id:"loginForm",onFinish:function(e){y(v(b,p)).then((function(){F()})).catch((function(){}))}},T),{},{name:"basic",initialValues:{remember:!0},children:[Object(a.jsx)("div",{style:{margin:"5",width:"60%",color:"#cc0000",border:"1px"},children:n}),Object(a.jsx)(S.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;m(t)},value:b})}),Object(a.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(a.jsx)(C.a.Password,{onChange:function(e){var t=e.target.value;f(t)},value:p})})]}),"FormLogin")})},"ModalLogin")};function _(){var e=localStorage.key("user")?JSON.parse(localStorage.getItem("user")).user:void 0;return e&&e.token?{Authorization:"token "+e.token}:{}}var L=function(e,t){return p.a.put(f+"profile/",{user:{email:e,password:t}},{headers:_()})},q=n(187),P=n.n(q),R=n(147),A=n.n(R),D=n(188),V=n.n(D),G=n(189),B=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},J=function(e){if(!Object(G.isEmail)(e))return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},M=function(e){if(e.length<6||e.length>40)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},U=function(e){var t=e.history,n=Object(r.useRef)(),c=Object(r.useRef)(),s=Object(r.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1],d=Object(r.useState)(""),b=Object(i.a)(d,2),m=b[0],h=b[1],O=Object(r.useState)(!1),g=Object(i.a)(O,2),p=g[0],f=g[1],x=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,k=Object(l.c)((function(e){return e.message_reducers})),I=k.messageEmail,S=k.messagePass,C=k.message,N=Object(l.b)(),T=Object(l.c)((function(e){return e.auth_reducers})).user;Object(r.useEffect)((function(){T&&T.user?(j(T.user.email),h(T.user.password)):t.push("/")}),[T]);return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsx)("div",{className:"card card-container",children:Object(a.jsxs)(P.a,{onSubmit:function(e){e.preventDefault(),n.current.validateAll(),0===c.current.context._errors.length&&L(u,m).then((function(e){N(y),N(v(u,m)),f(!0)})).catch((function(e){f(!1)}))},ref:n,children:[x&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)(A.a,{type:"text",className:"form-control",name:"email",value:u,onChange:function(e){var t=e.target.value;j(t)},validations:[B,J]}),I&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:p?"alert alert-success":"alert alert-danger",role:"alert",children:I})})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(A.a,{type:"password",className:"form-control",name:"password",value:m,onChange:function(e){var t=e.target.value;h(t)},validations:[B,M]}),S&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:p?"alert alert-success":"alert alert-danger",role:"alert",children:S})})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),C&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:p?"alert alert-success":"alert alert-danger",role:"alert",children:C})}),Object(a.jsx)(V.a,{style:{display:"none"},ref:c})]})})})},z=n(30),H=n(61),W=n(41),K=Object(W.a)(),Q=n(395),X=function(e){var t=e.history,n=e.title,r=e.style;return Object(a.jsx)(Q.a,{style:r||{padding:"0 50px",margin:"-30px 0 0 0"},className:"site-page-header",onBack:function(){return t.goBack()},title:n,subTitle:""})},Y=p.a.create({baseURL:f,headers:{}});var Z={getAllTask:function(){return Y.get("task/",{headers:_()})},getTask:function(e){return Y.get("detail_task/".concat(e),{headers:_()})},updateTask:function(e,t){return Y.put("update_task/".concat(e),t,{headers:_()})},delateTask:function(e){return Y.delete("delate_task/".concat(e),{headers:_()})},create_task:function(e){return Y.post("create_task/",e,{headers:_()})}},$=n(398),ee=n(390),te=n(198),ne=n(392),ae=function(e){var t=e.history,n=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,c=[{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"name",key:"name"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"desctiption",key:"desctiption"},{title:"Action",key:"action",render:function(e,r){return Object(a.jsxs)($.b,{size:"middle",children:[n&&Object(a.jsx)(H.b,{to:{pathname:"/edit",query:r},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c "}),Object(a.jsx)(H.b,{to:{pathname:"/detail",query:{name:r.name,desc:r.desctiption}},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0439 "}),Object(a.jsx)(ee.a,{title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u0441\u0442\u0440\u043e\u043a\u0443?",okText:"\u0414\u0430",onConfirm:function(){Z.delateTask(r.pk).then((function(e){t.push("/home")})).catch((function(e){te.b.error("\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0438\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432")}))},cancelText:"\u041d\u0435\u0442",children:Object(a.jsx)("a",{onClick:function(e){e.preventDefault()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})}}],s=Object(r.useState)([]),u=Object(i.a)(s,2),j=u[0],d=u[1];Object(r.useEffect)((function(){Z.getAllTask().then((function(e){d(e.data.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{key:e.pk})})))}))}),[]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Home",history:t}),Object(a.jsx)(I.a,{onClick:function(){t.push("/add")},type:"link",size:"large",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443!"}),Object(a.jsx)(ne.a,{columns:c,dataSource:j})]})},re=function(e){var t=e.id,n=e.name,c=e.desk,s=e.onhandleTask,l=Object(r.useState)(""),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(r.useState)(""),m=Object(i.a)(b,2),h=m[0],O=m[1],g=Object(r.useState)(t),p=Object(i.a)(g,2),f=p[0];p[1];Object(r.useEffect)((function(){n&&c&&(d(n),O(c))}),[]);return Object(a.jsx)("div",{style:{minHeight:"400vh",maxWidth:"952px"},children:Object(a.jsxs)(S.a,Object(o.a)(Object(o.a)({},T),{},{name:"basic",children:[Object(a.jsx)(S.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",name:"Task",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;d(t)},value:j,defaultValue:n})}),Object(a.jsx)(S.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"desck",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435!"}],children:Object(a.jsx)(C.a,{onChange:function(e){var t=e.target.value;O(t)},value:h,defaultValue:c})}),Object(a.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},F),{},{children:Object(a.jsx)(I.a,{type:"primary",onClick:function(e){e.preventDefault(),j&&h&&s(f,j,h)},htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c!"})}))]}))})},ce=function(e){var t=e.history,n=e.location,r=n.query?n.query:t.goBack(),c=r.pk,s=r.name,i=r.desctiption;return Object(a.jsxs)("div",{children:[Object(a.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Edit",history:t}),Object(a.jsx)(re,{id:c,name:s,desk:i,history:t,onhandleTask:function(e,n,a){Z.updateTask(e,{task:{name:n,desctiption:a}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},se=function(e){var t=e.history;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Create",history:t}),Object(a.jsx)(re,{id:"",name:"",desk:"",history:t,onhandleTask:function(e,n,a){Z.create_task({task:{name:n,desctiption:a}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},ie=n(393),oe=function(e){var t=e.history,n=e.location,c=Object(r.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){n.query?(l(n.query.name),b(n.query.desc)):t.goBack()}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Detail",history:t}),Object(a.jsx)(ie.a,{title:"\u0417\u0430\u0434\u0430\u0447\u0430",children:Object(a.jsx)(ie.a,{type:"inner",title:o,children:d})})]})},le=n(391),ue=n(57);var je=function(){var e=Object(l.c)((function(e){return e.auth_reducers})),t=e.isLoggindIn,n=(e.user,Object(r.useState)(!1)),c=Object(i.a)(n,2),s=c[0],o=c[1],u=Object(r.useState)(!1),j=Object(i.a)(u,2),d=j[0],b=j[1],m=Object(l.b)(),h=le.a.Header,g=le.a.Content,p=Object(l.c)((function(e){return e.message_reducers})).message;return Object(r.useEffect)((function(){K.listen((function(e){return m({type:O,payload:""})}))}),[m]),Object(a.jsx)(z.b,{history:K,children:Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(le.a,{className:"layout",children:[Object(a.jsxs)(h,{children:[Object(a.jsx)("div",{className:"logo"}),Object(a.jsxs)(ue.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(a.jsx)(ue.a.Item,{children:Object(a.jsx)(H.b,{to:"/home",children:"Main"})},"1"),!t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue.a.Item,{children:Object(a.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),o(!0)},children:"\u0412\u043e\u0439\u0442\u0438"})},"2"),Object(a.jsx)(ue.a.Item,{children:Object(a.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),b(!0)},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})},"3")]}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue.a.Item,{children:Object(a.jsx)(H.b,{to:"/profile",className:"nav-link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})},"4"),Object(a.jsx)(ue.a.Item,{children:Object(a.jsx)(H.b,{onClick:function(e){e.preventDefault(),m(y())},to:"/",className:"nav-link",children:"\u0412\u044b\u0445\u043e\u0434"})},"5")]})]})]}),Object(a.jsxs)(g,{style:{padding:"0 50px",margin:"50px 0 0 0"},children:[Object(a.jsx)("div",{className:"site-layout-content",children:Object(a.jsxs)(z.c,{children:[Object(a.jsx)(z.a,{exact:!0,path:"/",component:ae}),Object(a.jsx)(z.a,{exact:!0,path:"/home",component:ae}),Object(a.jsx)(z.a,{exact:!0,path:"/profile",component:U}),Object(a.jsx)(z.a,{exact:!0,path:"/detail",component:oe}),Object(a.jsx)(z.a,{exact:!0,path:"/edit",component:ce}),Object(a.jsx)(z.a,{exact:!0,path:"/add",component:se})]})}),Object(a.jsx)(w,{msgError:p,IsVisible:[s,o]},"login"),Object(a.jsx)(E,{msgError:p,IsVisible:[d,b]},"register")]})]})})})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,399)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},be=n(66),me=n(193),he=n(194),Oe=JSON.parse(localStorage.getItem("user")),ge=Oe?{isLoggindIn:!0,user:Oe}:{isLoggindIn:!1,user:null};var pe={messagePass:"",messageEmail:"",message:""};var fe=Object(be.combineReducers)({auth_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case u:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1});case j:return Object(o.a)(Object(o.a)({},e),{},{isLoggingdIn:!1});case d:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!0,user:a.user});case b:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1,user:null});case m:return x.logout(),Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1,user:null});default:return e}},message_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case h:return{message:a};case O:return{message:""};default:return e}}}),xe=[he.a],ve=Object(be.createStore)(fe,Object(me.composeWithDevTools)(be.applyMiddleware.apply(void 0,xe)));s.a.render(Object(a.jsx)(l.a,{store:ve,children:Object(a.jsx)(H.a,{children:Object(a.jsx)(je,{})})}),document.getElementById("root")),de()}},[[388,1,2]]]);
//# sourceMappingURL=main.d37930e4.chunk.js.map