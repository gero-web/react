(this.webpackJsonpfronted=this.webpackJsonpfronted||[]).push([[0],{192:function(e,t,a){},193:function(e,t,a){},371:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(0),c=a(28),s=a.n(c),i=(a(192),a.p,a(193),a(194),a(23)),o=a(32),l=a(29),u="REGISTER_SUCCESS",j="REGISTER_FAIL",d="LOGIN_SUCCESS",b="LOGIN_FAIL",m="LOGOUT",O="SET_MESSAGE",h="CLEAR_MESSAGE",p=a(61),g=a.n(p),x="https://peaceful-castle-65198.herokuapp.com/";var f={registration_user:function(e,t){return g.a.post(x+"register/",{user:{email:e,password:t}})},logout:function(){localStorage.removeItem("user")},login:function(e,t){return g.a.post(x+"login/",{user:{email:e,password:t}}).then((function(e){var t;t=e.data,localStorage.setItem("user",JSON.stringify(t))}))}},v=function(e,t){return function(a){return f.login(e,t).then((function(e){return a({type:d,payload:{user:e}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return a({type:b}),a({type:O,payload:t.error}),Promise.reject()}))}},y=function(){return{type:m}},k=a(379),S=a(380),I=a(375),N=a(378),C=a(91),_=a(55),w=a(377),T=function(e){var t=e.history,a=e.title,r=e.style;return Object(n.jsx)(w.a,{style:r||{padding:"0 50px",margin:"-30px 0 0 0"},className:"site-page-header",onBack:function(){return t.goBack()},title:a,subTitle:""})},E={labelCol:{span:8},wrapperCol:{span:16}},L={wrapperCol:{offset:8,span:16}},F=function(e){var t=e.history,a=Object(r.useState)(""),c=Object(o.a)(a,2),s=c[0],d=c[1],b=Object(r.useState)(""),m=Object(o.a)(b,2),h=m[0],p=m[1],g=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,x=Object(l.c)((function(e){return e.message_reducers})).message,v=Object(l.b)();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T,{style:{padding:"0 50px",margin:"-30px 0 0 0"},history:t,title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),!g&&Object(n.jsxs)(n.Fragment,{children:[x&&Object(n.jsx)(S.b,{children:(console.log("1"),void k.b.error(x))}),Object(n.jsxs)(I.a,Object(i.a)(Object(i.a)({onFinish:function(e){v(function(e,t){return function(a){return f.registration_user(e,t).then((function(e){return a({type:u}),a({type:O,payload:e.data.message}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return console.log(JSON.stringify(t)),a({type:j}),console.log(t),a({type:O,payload:t.email[0]}),t.error&&a({type:O,payload:t.error}),Promise.reject()}))}}(s,h)).then((function(){t.push("/login")})).catch((function(){}))}},E),{},{name:"basic",initialValues:{remember:!0},children:[Object(n.jsx)(I.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(n.jsx)(N.a,{onChange:function(e){var t=e.target.value;d(t)},value:s})}),Object(n.jsx)(I.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{len:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(n.jsx)(N.a.Password,{onChange:function(e){var t=e.target.value;p(t)},value:h})}),Object(n.jsx)(I.a.Item,Object(i.a)(Object(i.a)({},L),{},{name:"remember",valuePropName:"checked",children:Object(n.jsx)(C.a,{children:"Remember me"})})),Object(n.jsx)(I.a.Item,Object(i.a)(Object(i.a)({},L),{},{children:Object(n.jsx)(_.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})]})},P=function(e){var t=e.history,a=Object(r.useState)(""),c=Object(o.a)(a,2),s=c[0],u=c[1],j=Object(r.useState)(""),d=Object(o.a)(j,2),b=d[0],m=d[1],O=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,h=Object(l.c)((function(e){return e.message_reducers})).message,p=Object(l.b)();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T,{style:{padding:"0 50px",margin:"-30px 0 0 0"},history:t,title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),!O&&Object(n.jsxs)(n.Fragment,{children:[h&&Object(n.jsx)(S.b,{children:void k.b.error(h)}),Object(n.jsxs)(I.a,Object(i.a)(Object(i.a)({onFinish:function(e){p(v(s,b)).then((function(){t.push("/")})).catch((function(){}))}},E),{},{name:"basic",initialValues:{remember:!0},children:[Object(n.jsx)(I.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(n.jsx)(N.a,{onChange:function(e){var t=e.target.value;u(t)},value:s})}),Object(n.jsx)(I.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{len:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(n.jsx)(N.a.Password,{onChange:function(e){var t=e.target.value;m(t)},value:b})}),Object(n.jsx)(I.a.Item,Object(i.a)(Object(i.a)({},L),{},{name:"remember",valuePropName:"checked",children:Object(n.jsx)(C.a,{children:"Remember me"})})),Object(n.jsx)(I.a.Item,Object(i.a)(Object(i.a)({},L),{},{children:Object(n.jsx)(_.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})]})};function q(){var e=localStorage.key("user")?JSON.parse(localStorage.getItem("user")).user:void 0;return e&&e.token?{Authorization:"token "+e.token}:{}}var A=function(e,t){return g.a.put(x+"profile/",{user:{email:e,password:t}},{headers:q()})},R=a(173),D=a.n(R),G=a(131),B=a.n(G),J=a(174),U=a.n(J),z=a(175),M=function(e){if(!e)return Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},V=function(e){if(!Object(z.isEmail)(e))return Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},H=function(e){if(e.length<6||e.length>40)return Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},W=function(e){var t=e.history,a=Object(r.useRef)(),c=Object(r.useRef)(),s=Object(r.useState)(""),i=Object(o.a)(s,2),u=i[0],j=i[1],d=Object(r.useState)(""),b=Object(o.a)(d,2),m=b[0],O=b[1],h=Object(r.useState)(!1),p=Object(o.a)(h,2),g=p[0],x=p[1],f=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,k=Object(l.c)((function(e){return e.message_reducers})),S=k.messageEmail,I=k.messagePass,N=k.message,C=Object(l.b)(),_=Object(l.c)((function(e){return e.auth_reducers})).user;Object(r.useEffect)((function(){_&&_.user?(j(_.user.email),O(_.user.password)):t.push("/")}),[_]);return Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsx)("div",{className:"card card-container",children:Object(n.jsxs)(D.a,{onSubmit:function(e){e.preventDefault(),a.current.validateAll(),0===c.current.context._errors.length&&A(u,m).then((function(e){C(y),C(v(u,m)),x(!0)})).catch((function(e){x(!1)}))},ref:a,children:[f&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)(B.a,{type:"text",className:"form-control",name:"email",value:u,onChange:function(e){var t=e.target.value;j(t)},validations:[M,V]}),S&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("div",{className:g?"alert alert-success":"alert alert-danger",role:"alert",children:S})})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)(B.a,{type:"password",className:"form-control",name:"password",value:m,onChange:function(e){var t=e.target.value;O(t)},validations:[M,H]}),I&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("div",{className:g?"alert alert-success":"alert alert-danger",role:"alert",children:I})})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),N&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("div",{className:g?"alert alert-success":"alert alert-danger",role:"alert",children:N})}),Object(n.jsx)(U.a,{style:{display:"none"},ref:c})]})})})},K=a(27),Q=a(48),X=a(36),Y=Object(X.a)(),Z=g.a.create({baseURL:x,headers:{}});var $={getAllTask:function(){return Z.get("task/",{headers:q()})},getTask:function(e){return Z.get("detail_task/".concat(e),{headers:q()})},updateTask:function(e,t){return Z.put("update_task/".concat(e),t,{headers:q()})},delateTask:function(e){return Z.delete("delate_task/".concat(e),{headers:q()})},create_task:function(e){return Z.post("create_task/",e,{headers:q()})}},ee=a(374),te=function(e){var t=e.history,a=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,c=[{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"name",key:"name"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"desctiption",key:"desctiption"},{title:"Action",key:"action",render:function(e,t){return Object(n.jsxs)(S.b,{size:"middle",children:[a&&Object(n.jsx)(Q.b,{to:{pathname:"/edit",query:t},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c "}),Object(n.jsx)(Q.b,{to:{pathname:"/detail",query:{name:t.name,desc:t.desctiption}},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0439 "}),Object(n.jsx)("a",{onClick:function(e){e.preventDefault(),$.delateTask(t.pk).then((function(e){window.location.reload()})).catch((function(e){console.log(e)}))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}}],s=Object(r.useState)([]),u=Object(o.a)(s,2),j=u[0],d=u[1];Object(r.useEffect)((function(){$.getAllTask().then((function(e){d(e.data.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{key:e.pk})})))}))}),[]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Home",history:t}),Object(n.jsx)(_.a,{onClick:function(){t.push("/add")},type:"link",size:"large",children:"Create!"}),Object(n.jsx)(ee.a,{columns:c,dataSource:j})]})},ae=function(e){var t=e.id,a=e.name,c=e.desk,s=e.onhandleTask,l=Object(r.useState)(""),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(r.useState)(""),m=Object(o.a)(b,2),O=m[0],h=m[1],p=Object(r.useState)(t),g=Object(o.a)(p,2),x=g[0];g[1];Object(r.useEffect)((function(){a&&c&&(d(a),h(c))}),[]);return Object(n.jsx)("div",{style:{minHeight:"400vh",maxWidth:"952px"},children:Object(n.jsxs)(I.a,Object(i.a)(Object(i.a)({},E),{},{name:"basic",children:[Object(n.jsx)(I.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",name:"Task",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443!"}],children:Object(n.jsx)(N.a,{onChange:function(e){var t=e.target.value;d(t)},value:j,defaultValue:a})}),Object(n.jsx)(I.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"desck",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435!"}],children:Object(n.jsx)(N.a,{onChange:function(e){var t=e.target.value;h(t)},value:O,defaultValue:c})}),Object(n.jsx)(I.a.Item,Object(i.a)(Object(i.a)({},L),{},{children:Object(n.jsx)(_.a,{type:"primary",onClick:function(e){e.preventDefault(),j&&O&&s(x,j,O)},htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c!"})}))]}))})},ne=function(e){var t=e.history,a=e.location,r=a.query?a.query:t.goBack(),c=r.pk,s=r.name,i=r.desctiption;return Object(n.jsxs)("div",{children:[Object(n.jsx)(T,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Edit",history:t}),Object(n.jsx)(ae,{id:c,name:s,desk:i,history:t,onhandleTask:function(e,a,n){$.updateTask(e,{task:{name:a,desctiption:n}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},re=function(e){var t=e.history;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Create",history:t}),Object(n.jsx)(ae,{id:"",name:"",desk:"",history:t,onhandleTask:function(e,a,n){$.create_task({task:{name:a,desctiption:n}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},ce=a(376),se=function(e){var t=e.history,a=e.location,c=Object(r.useState)(""),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(r.useState)(""),j=Object(o.a)(u,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){a.query?(l(a.query.name),b(a.query.desc)):t.goBack()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Detail",history:t}),Object(n.jsx)(ce.a,{title:"\u0417\u0430\u0434\u0430\u0447\u0430",children:Object(n.jsx)(ce.a,{type:"inner",title:i,children:d})})]})},ie=a(373),oe=a(51);var le=function(){var e=Object(l.c)((function(e){return e.auth_reducers})),t=e.isLoggindIn,a=(e.user,Object(l.b)()),c=ie.a.Header,s=ie.a.Content;return Object(r.useEffect)((function(){Y.listen((function(e){return a({type:h,payload:""})}))}),[a]),Object(n.jsx)(K.b,{history:Y,children:Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(ie.a,{className:"layout",children:[Object(n.jsxs)(c,{children:[Object(n.jsx)("div",{className:"logo"}),Object(n.jsxs)(oe.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(n.jsx)(oe.a.Item,{children:Object(n.jsx)(Q.b,{to:"/home",children:"Main"})},"1"),!t&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(oe.a.Item,{children:Object(n.jsx)(Q.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})},"2"),Object(n.jsx)(oe.a.Item,{children:Object(n.jsx)(Q.b,{to:"/register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})},"3")]}),t&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(oe.a.Item,{children:Object(n.jsx)(Q.b,{to:"/profile",className:"nav-link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})},"4"),Object(n.jsx)(oe.a.Item,{children:Object(n.jsx)(Q.b,{onClick:function(e){e.preventDefault(),a(y())},to:"/",className:"nav-link",children:"\u0412\u044b\u0445\u043e\u0434"})},"5")]})]})]}),Object(n.jsx)(s,{style:{padding:"0 50px",margin:"50px 0 0 0"},children:Object(n.jsx)("div",{className:"site-layout-content",children:Object(n.jsxs)(K.c,{children:[Object(n.jsx)(K.a,{exact:!0,path:"/",component:te}),Object(n.jsx)(K.a,{exact:!0,path:"/home",component:te}),Object(n.jsx)(K.a,{exact:!0,path:"/login",component:P}),Object(n.jsx)(K.a,{exact:!0,path:"/register",component:F}),Object(n.jsx)(K.a,{exact:!0,path:"/profile",component:W}),Object(n.jsx)(K.a,{exact:!0,path:"/detail",component:se}),Object(n.jsx)(K.a,{exact:!0,path:"/edit",component:ne}),Object(n.jsx)(K.a,{exact:!0,path:"/add",component:re})]})})})]})})})},ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,381)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},je=a(60),de=a(179),be=a(180),me=JSON.parse(localStorage.getItem("user")),Oe=me?{isLoggindIn:!0,user:me}:{isLoggindIn:!1,user:null};var he={messagePass:"",messageEmail:"",message:""};var pe=Object(je.combineReducers)({auth_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case u:return Object(i.a)(Object(i.a)({},e),{},{isLoggindIn:!1});case j:return Object(i.a)(Object(i.a)({},e),{},{isLoggingdIn:!1});case d:return Object(i.a)(Object(i.a)({},e),{},{isLoggindIn:!0,user:n.user});case b:return Object(i.a)(Object(i.a)({},e),{},{isLoggindIn:!1,user:null});case m:return f.logout(),Object(i.a)(Object(i.a)({},e),{},{isLoggindIn:!1,user:null});default:return e}},message_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case O:return{message:n};case h:return{message:""};default:return e}}}),ge=[be.a],xe=Object(je.createStore)(pe,Object(de.composeWithDevTools)(je.applyMiddleware.apply(void 0,ge)));s.a.render(Object(n.jsx)(l.a,{store:xe,children:Object(n.jsx)(Q.a,{children:Object(n.jsx)(le,{})})}),document.getElementById("root")),ue()}},[[371,1,2]]]);
//# sourceMappingURL=main.13886a67.chunk.js.map