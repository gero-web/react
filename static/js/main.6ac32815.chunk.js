(this.webpackJsonpfronted=this.webpackJsonpfronted||[]).push([[0],{209:function(e,t,a){},210:function(e,t,a){},388:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(0),c=a(28),s=a.n(c),i=(a(209),a(27)),o=(a.p,a(210),a(211),a(25)),l=a(32),u="REGISTER_SUCCESS",j="REGISTER_FAIL",d="LOGIN_SUCCESS",b="LOGIN_FAIL",m="LOGOUT",O="SET_MESSAGE",h="CLEAR_MESSAGE",g=a(66),p=a.n(g),f="https://peaceful-castle-65198.herokuapp.com/";var x={registration_user:function(e,t){return p.a.post(f+"register/",{user:{email:e,password:t}})},logout:function(){localStorage.removeItem("user")},login:function(e,t){return p.a.post(f+"login/",{user:{email:e,password:t}}).then((function(e){var t;t=e.data,localStorage.setItem("user",JSON.stringify(t))}))}},v=function(e,t){return function(a){return x.login(e,t).then((function(e){return a({type:d,payload:{user:e}}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return a({type:b}),a({type:O,payload:t.error}),Promise.reject()}))}},y=function(){return{type:m}},k=a(397),I=a(35),S=a(394),C=a(396),N=a(103),T={labelCol:{span:8},wrapperCol:{span:16}},F={wrapperCol:{offset:8,span:16}},E=function(e){var t=e.IsVisible,a=e.msgError,c=Object(r.useState)(""),s=Object(i.a)(c,2),d=s[0],b=s[1],m=Object(r.useState)(""),h=Object(i.a)(m,2),g=h[0],p=h[1],f=Object(i.a)(t,2),y=f[0],E=f[1],w=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,_=Object(l.b)(),L=function(){E(!1),q()},q=function(){_({type:O,payload:""})};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(k.a,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",centered:!0,visible:y,onCancel:L,footer:[Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(I.a,{form:"registerForm",onClick:L,type:"danger",htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cansle"),Object(n.jsx)(I.a,{form:"registerForm",onClick:function(){setTimeout((function(){}),1e3)},type:"primary",htmlType:"submit",children:"Ok"},"submit")]})],children:!w&&Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(S.a,Object(o.a)(Object(o.a)({onFinish:function(e){_(function(e,t){return function(a){return x.registration_user(e,t).then((function(e){return a({type:u}),a({type:O,payload:e.data.message}),Promise.resolve()}),(function(e){var t=e.response&&e.response.data&&e.response.data.errors;return console.log(JSON.stringify(t)),a({type:j}),console.log(t),a({type:O,payload:t.email[0]}),t.error&&a({type:O,payload:t.error}),Promise.reject()}))}}(d,g)).then((function(){_(v(d,g)).then((function(){L()})).catch((function(){}))})).catch((function(){console.log(1)}))},id:"registerForm"},T),{},{name:"basic",initialValues:{remember:!0},children:[Object(n.jsx)("div",{style:{margin:"5",width:"60%",color:"#cc0000",border:"1px"},children:a}),Object(n.jsx)(S.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(n.jsx)(C.a,{onChange:function(e){var t=e.target.value;b(t)},value:d})}),Object(n.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(n.jsx)(C.a.Password,{onChange:function(e){var t=e.target.value;p(t)},value:g})}),Object(n.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},F),{},{name:"remember",valuePropName:"checked",children:Object(n.jsx)(N.a,{children:"Remember me"})}))]}),"FormRegister")})},"ModalRegister")})},w=function(e){var t=e.IsVisible,a=e.msgError,c=Object(i.a)(t,2),s=c[0],u=c[1],j=Object(r.useState)(""),d=Object(i.a)(j,2),b=d[0],m=d[1],h=Object(r.useState)(""),g=Object(i.a)(h,2),p=g[0],f=g[1],x=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,y=Object(l.b)(),N=function(){setTimeout((function(){}),2e3)},F=function(){u(!1),E()},E=function(){y({type:O,payload:""})};return Object(n.jsx)(k.a,{title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",centered:!0,visible:s,onOk:N,onCancel:F,footer:[Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(I.a,{form:"loginForm",onClick:F,type:"danger",htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"cansle"),Object(n.jsx)(I.a,{form:"loginForm",onClick:N,type:"primary",htmlType:"submit",children:"Ok"},"submit")]})],children:!x&&Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(S.a,Object(o.a)(Object(o.a)({id:"loginForm",onFinish:function(e){y(v(b,p)).then((function(){F()})).catch((function(){}))}},T),{},{name:"basic",initialValues:{remember:!0},children:[Object(n.jsx)("div",{style:{margin:"5",width:"60%",color:"#cc0000",border:"1px"},children:a}),Object(n.jsx)(S.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 email!"},{type:"email",message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email!"}],children:Object(n.jsx)(C.a,{onChange:function(e){var t=e.target.value;m(t)},value:b})}),Object(n.jsx)(S.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"},{min:8,message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c  \u0431\u043e\u043b\u044c\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}],children:Object(n.jsx)(C.a.Password,{onChange:function(e){var t=e.target.value;f(t)},value:p})})]}),"FormLogin")})},"ModalLogin")};function _(){var e=localStorage.key("user")?JSON.parse(localStorage.getItem("user")).user:void 0;return e&&e.token?{Authorization:"token "+e.token}:{}}var L=function(e,t){return p.a.put(f+"profile/",{user:{email:e,password:t}},{headers:_()})},q=a(187),P=a.n(q),R=a(147),A=a.n(R),D=a(188),V=a.n(D),G=a(189),B=function(e){if(!e)return Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},J=function(e){if(!Object(G.isEmail)(e))return Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},M=function(e){if(e.length<6||e.length>40)return Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},U=function(e){var t=e.history,a=Object(r.useRef)(),c=Object(r.useRef)(),s=Object(r.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1],d=Object(r.useState)(""),b=Object(i.a)(d,2),m=b[0],O=b[1],h=Object(r.useState)(!1),g=Object(i.a)(h,2),p=g[0],f=g[1],x=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,k=Object(l.c)((function(e){return e.message_reducers})),I=k.messageEmail,S=k.messagePass,C=k.message,N=Object(l.b)(),T=Object(l.c)((function(e){return e.auth_reducers})).user;Object(r.useEffect)((function(){T&&T.user?(j(T.user.email),O(T.user.password)):t.push("/")}),[T]);return Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsx)("div",{className:"card card-container",children:Object(n.jsxs)(P.a,{onSubmit:function(e){e.preventDefault(),a.current.validateAll(),0===c.current.context._errors.length&&L(u,m).then((function(e){N(y),N(v(u,m)),f(!0)})).catch((function(e){f(!1)}))},ref:a,children:[x&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)(A.a,{type:"text",className:"form-control",name:"email",value:u,onChange:function(e){var t=e.target.value;j(t)},validations:[B,J]}),I&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("div",{className:p?"alert alert-success":"alert alert-danger",role:"alert",children:I})})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)(A.a,{type:"password",className:"form-control",name:"password",value:m,onChange:function(e){var t=e.target.value;O(t)},validations:[B,M]}),S&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("div",{className:p?"alert alert-success":"alert alert-danger",role:"alert",children:S})})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),C&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("div",{className:p?"alert alert-success":"alert alert-danger",role:"alert",children:C})}),Object(n.jsx)(V.a,{style:{display:"none"},ref:c})]})})})},z=a(30),H=a(81),W=a(41),K=Object(W.a)(),Q=a(395),X=function(e){var t=e.history,a=e.title,r=e.style;return Object(n.jsx)(Q.a,{style:r||{padding:"0 50px",margin:"-30px 0 0 0"},className:"site-page-header",onBack:function(){return t.goBack()},title:a,subTitle:""})},Y=p.a.create({baseURL:f,headers:{}});var Z={getAllTask:function(){return Y.get("task/",{headers:_()})},getTask:function(e){return Y.get("detail_task/".concat(e),{headers:_()})},updateTask:function(e,t){return Y.put("update_task/".concat(e),t,{headers:_()})},delateTask:function(e){return Y.delete("delate_task/".concat(e),{headers:_()})},create_task:function(e){return Y.post("create_task/",e,{headers:_()})}},$=a(398),ee=a(390),te=a(198),ae=a(392),ne=function(e){var t=e.history,a=Object(l.c)((function(e){return e.auth_reducers})).isLoggindIn,c=[{title:"\u0417\u0430\u0434\u0430\u0447\u0430",dataIndex:"name",key:"name"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"desctiption",key:"desctiption"},{title:"Action",key:"action",render:function(e,r){return Object(n.jsxs)($.b,{size:"middle",children:[a&&Object(n.jsx)(H.a,{to:{pathname:"/edit",query:r},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c "}),Object(n.jsx)(H.a,{to:{pathname:"/detail",query:{name:r.name,desc:r.desctiption}},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0439 "}),Object(n.jsx)(ee.a,{title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u0441\u0442\u0440\u043e\u043a\u0443?",okText:"\u0414\u0430",onConfirm:function(){Z.delateTask(r.pk).then((function(e){t.go(0)})).catch((function(e){te.b.error("\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0438\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432")}))},cancelText:"\u041d\u0435\u0442",children:Object(n.jsx)("a",{onClick:function(e){e.preventDefault()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})}}],s=Object(r.useState)([]),u=Object(i.a)(s,2),j=u[0],d=u[1];Object(r.useEffect)((function(){Z.getAllTask().then((function(e){d(e.data.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{key:e.pk})})))}))}),[]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Home",history:t}),Object(n.jsx)(I.a,{onClick:function(){t.push("/add")},type:"link",size:"large",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443!"}),Object(n.jsx)(ae.a,{columns:c,dataSource:j})]})},re=function(e){var t=e.id,a=e.name,c=e.desk,s=e.onhandleTask,l=Object(r.useState)(""),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(r.useState)(""),m=Object(i.a)(b,2),O=m[0],h=m[1],g=Object(r.useState)(t),p=Object(i.a)(g,2),f=p[0];p[1];Object(r.useEffect)((function(){a&&c&&(d(a),h(c))}),[]);return Object(n.jsx)("div",{style:{minHeight:"400vh",maxWidth:"952px"},children:Object(n.jsxs)(S.a,Object(o.a)(Object(o.a)({},T),{},{name:"basic",children:[Object(n.jsx)(S.a.Item,{label:"\u0417\u0430\u0434\u0430\u0447\u0430",name:"Task",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443!"}],children:Object(n.jsx)(C.a,{onChange:function(e){var t=e.target.value;d(t)},value:j,defaultValue:a})}),Object(n.jsx)(S.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"desck",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435!"}],children:Object(n.jsx)(C.a,{onChange:function(e){var t=e.target.value;h(t)},value:O,defaultValue:c})}),Object(n.jsx)(S.a.Item,Object(o.a)(Object(o.a)({},F),{},{children:Object(n.jsx)(I.a,{type:"primary",onClick:function(e){e.preventDefault(),j&&O&&s(f,j,O)},htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c!"})}))]}))})},ce=function(e){var t=e.history,a=e.location,r=a.query?a.query:t.goBack(),c=r.pk,s=r.name,i=r.desctiption;return Object(n.jsxs)("div",{children:[Object(n.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Edit",history:t}),Object(n.jsx)(re,{id:c,name:s,desk:i,history:t,onhandleTask:function(e,a,n){Z.updateTask(e,{task:{name:a,desctiption:n}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},se=function(e){var t=e.history;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Create",history:t}),Object(n.jsx)(re,{id:"",name:"",desk:"",history:t,onhandleTask:function(e,a,n){Z.create_task({task:{name:a,desctiption:n}}).then((function(e){t.push("/home")})).catch((function(e){console.log(e)}))}})]})},ie=a(393),oe=function(e){var t=e.history,a=e.location,c=Object(r.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){a.query?(l(a.query.name),b(a.query.desc)):t.goBack()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X,{style:{padding:"0 50px",margin:"-30px 0 0 0"},title:"Detail",history:t}),Object(n.jsx)(ie.a,{title:"\u0417\u0430\u0434\u0430\u0447\u0430",children:Object(n.jsx)(ie.a,{type:"inner",title:o,children:d})})]})},le=a(391),ue=a(57);var je=function(){var e=Object(l.c)((function(e){return e.auth_reducers})),t=e.isLoggindIn,a=(e.user,Object(r.useState)(!1)),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(!1),j=Object(i.a)(u,2),d=j[0],b=j[1],m=Object(l.b)(),O=le.a.Header,g=le.a.Content,p=Object(l.c)((function(e){return e.message_reducers})).message;return Object(r.useEffect)((function(){K.listen((function(e){return m({type:h,payload:""})}))}),[m]),Object(n.jsx)(z.b,{history:K,children:Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(le.a,{className:"layout",children:[Object(n.jsxs)(O,{children:[Object(n.jsx)("div",{className:"logo"}),Object(n.jsxs)(ue.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],children:[Object(n.jsx)(ue.a.Item,{children:Object(n.jsx)(H.a,{to:"/home",children:"Main"})},"1"),!t&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ue.a.Item,{children:Object(n.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),o(!0)},children:"\u0412\u043e\u0439\u0442\u0438"})},"2"),Object(n.jsx)(ue.a.Item,{children:Object(n.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),b(!0)},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})},"3")]}),t&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ue.a.Item,{children:Object(n.jsx)(H.a,{to:"/profile",className:"nav-link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})},"4"),Object(n.jsx)(ue.a.Item,{children:Object(n.jsx)(H.a,{onClick:function(e){e.preventDefault(),m(y())},to:"/",className:"nav-link",children:"\u0412\u044b\u0445\u043e\u0434"})},"5")]})]})]}),Object(n.jsxs)(g,{style:{padding:"0 50px",margin:"50px 0 0 0"},children:[Object(n.jsx)("div",{className:"site-layout-content",children:Object(n.jsxs)(z.c,{children:[Object(n.jsx)(z.a,{exact:!0,path:"/",component:ne}),Object(n.jsx)(z.a,{exact:!0,path:"/home",component:ne}),Object(n.jsx)(z.a,{exact:!0,path:"/profile",component:U}),Object(n.jsx)(z.a,{exact:!0,path:"/detail",component:oe}),Object(n.jsx)(z.a,{exact:!0,path:"/edit",component:ce}),Object(n.jsx)(z.a,{exact:!0,path:"/add",component:se})]})}),Object(n.jsx)(w,{msgError:p,IsVisible:[s,o]},"login"),Object(n.jsx)(E,{msgError:p,IsVisible:[d,b]},"register")]})]})})})},de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,399)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},be=a(65),me=a(193),Oe=a(194),he=JSON.parse(localStorage.getItem("user")),ge=he?{isLoggindIn:!0,user:he}:{isLoggindIn:!1,user:null};var pe={messagePass:"",messageEmail:"",message:""};var fe=Object(be.combineReducers)({auth_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case u:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1});case j:return Object(o.a)(Object(o.a)({},e),{},{isLoggingdIn:!1});case d:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!0,user:n.user});case b:return Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1,user:null});case m:return x.logout(),Object(o.a)(Object(o.a)({},e),{},{isLoggindIn:!1,user:null});default:return e}},message_reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case O:return{message:n};case h:return{message:""};default:return e}}}),xe=[Oe.a],ve=Object(be.createStore)(fe,Object(me.composeWithDevTools)(be.applyMiddleware.apply(void 0,xe)));s.a.render(Object(n.jsx)(l.a,{store:ve,children:Object(n.jsx)(je,{})}),document.getElementById("root")),de()}},[[388,1,2]]]);
//# sourceMappingURL=main.6ac32815.chunk.js.map